Climate-sensitive Urban Planning through
Optimization of Tree Placements
Simon Schrodi Ferdinand Briegel Max Argus Andreas Christen Thomas Brox
University of Freiburg
{schrodi,brox,argusm }@cs.uni-freiburg.de
{ferdinand.briegel,andreas.christen }@meteo.uni-freiburg.de
Abstract
Climate change is increasing the intensity and frequency of many extreme weather
events, including heatwaves, which results in increased thermal discomfort and
mortality rates. While global mitigation action is undoubtedly necessary, so is
climate adaptation, e.g., through climate-sensitive urban planning. Among the most
promising strategies is harnessing the benefits of urban trees in shading and cooling
pedestrian-level environments. Our work investigates the challenge of optimal
placement of such trees. Physical simulations can estimate the radiative and thermal
impact of trees on human thermal comfort but induce high computational costs.
This rules out optimization of tree placements over large areas and considering
effects over longer time scales. Hence, we employ neural networks to simulate the
point-wise mean radiant temperatures–a driving factor of outdoor human thermal
comfort–across various time scales, spanning from daily variations to extended
time scales of heatwave events and even decades. To optimize tree placements, we
harness the innate local effect of trees within the iterated local search framework
with tailored adaptations. We show the efficacy of our approach across a wide
spectrum of study areas and time scales. We believe that our approach is a step
towards empowering decision-makers, urban designers and planners to proactively
and effectively assess the potential of urban trees to mitigate heat stress.
1 Introduction
Climate change will have profound implications on many aspects of our lives, ranging from the
quality of outdoor environments and biodiversity, to the safety and well-being of the human populace
[United Nations, 2023]. Particularly noteworthy is the observation that densely populated urban
regions, typically characterized by high levels of built and sealed surfaces, face an elevated exposure
and vulnerability to heat stress, which in turn raises the risk of mortality during heatwaves [Gabriel
and Endlicher, 2011]. The mean radiant temperature ( Tmrt,°C) is one of the main factors affecting
daytime outdoor human thermal comfort [Holst and Mayer, 2011, Kántor and Unger, 2011, Cohen
et al., 2012].1High Tmrtcan negatively affect human health [Mayer et al., 2008] and Tmrthas a
higher correlation with mortality than air temperature [Thorsson et al., 2014]. Consequently, climate-
sensitive urban planning should try to lower maximum Tmrtas a suitable climate adaption strategy to
enhance (or at least maintain) current levels of outdoor human thermal comfort.
Among the array of climate adaption strategies considered for mitigation of adverse urban thermal
conditions, urban greening, specifically urban trees, has garnered significant attention due to their
numerous benefits, including a reduction of Tmrt, transpirative cooling, air quality [Nowak et al., 2006],
and aesthetic appeal [Lindemann-Matthies and Brieger, 2016]. Previous studies found the strong
1Tmrtis introduced in more detail in Appendix A.
Tackling Climate Change with Machine Learning: workshop at NeurIPS 2023.0 200 4000
200
400city-center
0 200 400new r.a.
0 200 400medium-age r.a.
0 200 400old r.a.
0 200 400industrial
−808∆Tmrt[K]
Figure 1: Optimizing tree placements can substantially reduce point-wise Tmrt, e.g., during heatwaves,
leading to improved outdoor human thermal comfort. Optimized placements of 50 added trees for the
hottest week in 2020 across diverse urban neighborhoods (from left to right: city-center , recently
developed new r.a. (residential area), medium-age r.a. ,old r.a. ,industrial area).
influence of tree positions [Zhao et al., 2018, Abdi et al., 2020, Lee et al., 2020] and correspondingly
other works optimized them [Chen et al., 2008, Ooka et al., 2008, Zhao et al., 2017, Stojakovic et al.,
2020, Wallenberg et al., 2022]. However, these works were limited by the computational cost of
physical models, which rendered the optimization of tree placements over large areas or long time
scales infeasible. On the other hand, there has been increased interest in machine learning for climate
science [Rolnick et al., 2022]. However, previous work mostly focused on efficiency gains [Briegel
et al., 2023, Huang and Hoefler, 2023], raised climate awareness [Schmidt et al., 2022], improved
the analytical capabilities [Albert et al., 2017, Blanchard et al., 2022, Teng et al., 2023, Otness et al.,
2023], or used it for urban planning [Shen et al., 2020, Wang et al., 2020, 2021, 2023, Zheng et al.,
2023]. Our work deviates from these prior works, as it directly optimizes a meteorological quantity
(Tmrt) that correlates well with heat stress experienced by humans (outdoor human thermal comfort).
In this work, we present a simple, scalable yet effective optimization approach for positioning trees
in urban districts to facilitate climate-sensitive urban planning to adapt to climate change in cities.2
We use the iterated local search framework [Lourenço et al., 2003, 2019] with tailored adaptations,
coupled with a fast estimation of Tmrtfrom spatial-temporal input data using a neural network. Our
evaluation shows the efficacy of our approach as a means to improve outdoor human thermal comfort
by decreasing point-wise Tmrtover various time periods and study areas, e.g., see Figure 1 for an
heatwave event. Our results indicate the potential of our method for climate-sensitive urban planning
toempower decision-makers in effectively adapting cities to the effects of climate change .
2 Methods
We consider a function fTmrt(s, m)to model point-wise Tmrt∈Rh×wof a spatial resolution of h×w.
It can be either a physical or machine learning model and operates on a composite input space of
spatial s= [sv, s¬v]∈R|S|×h×wand meteorological inputs m∈Mfrom time period M, e.g.,
a heatwave event. The spatial inputs Sconsist of vegetation-related sv(digital surface model for
vegetation, sky view factor maps induced by vegetation) and non-vegetation-related spatial inputs
s¬v(digital surface model for buildings, digital elevation model, land cover class map, wall aspect
and height, sky view factor maps induced by buildings). Appendix B provides more details on the
data. We followed Briegel et al. [2023] in training a deep learning model fTmrton data generated
by the physical model SOLWEIG [Lindberg et al., 2008]. Vegetation-related spatial inputs svare
further induced by the positions Tp∈Nk×h×wand geometry tgofktrees by function fv(tp, tg).
During optimization we modify the digital surface model for vegetation and update depending spatial
inputs. To enhance outdoor human thermal comfort, we want to minimize the aggregated, point-wise
TM,ϕ
mrt∈Rh×wfor a given aggregation function ϕ, e.g., mean, and time period Mby seeking the tree
positions
t∗
p∈arg min
t′pϕ({fTmrt([fv(t′
p, tg), s¬v], m)| ∀m∈M}) , (1)
in the urban landscape, where we keep tree geometry tgfixed for the sake of simplicity.
Optimization of tree placements To search tree placements, we adopted the iterated local search
framework from Lourenço et al. [2003, 2019] with tailored adaptations to leverage that the effec-
tiveness of trees is bound to a local neighborhood. The core principle of iterated local search is the
iterative refinement of the current local optimum through the alternation of perturbation and local
2Code is available at https://github.com/lmb-freiburg/tree-planting .
2Algorithm 1 Iterated local search to find the best tree positions.
1:Input: ∆Tt
mrt,fTM,ϕ
mrt, number of trees k, number of iterations I, local optima buffer size b
2:Output: best found tree s∗inS∗
3:s∗←TopK (∆Tt
mrt, k) # Initialization
4:fori= 1, . . . , I do
5:s′←PerturbationWithGA (S∗,∆Tt
mrt) # Perturbation
6:s′
∗←HillClimbing (s′) # Local search
7:S∗←TopK ({fTM,ϕ
mrt(s)|s∈S∗∪s′
∗)}, b) # Acceptance criterion
8:end for
TmrtDSM.V
fsvfsv
s⌐v
spatial inputs s
fTmrtM,ΦM,Φ
Figure 2: Overview of TM,ϕ
mrt modeling. To account for changes in vegetation during optimization,
we modify the digital surface model for vegetation (DSM.V) and update depending spatial inputs
(sky view factor maps for vegetation) with the model fsvf. The model fTM,ϕ
mrttakes these updated
vegetation-related svand non-vegetation-related spatial inputs s¬vto estimate the aggregated, point-
wiseTM,ϕ
mrt for a given aggregation function ϕ, e.g., mean, and time period M, e.g., heatwave event.
search procedures. We initialize the first local optimum by a simple greedy heuristic. Specifically,
we compute the difference in Tmrt(∆Tt
mrt) resulting from the presence or absence of a single tree at
every possible position on the spatial grid. Subsequently, we greedily select the positions based on the
maximal ∆Tt
mrt(TopK ). During the iterative refinement, we perturb the current local optimum using
a genetic algorithm [Srinivas and Patnaik, 1994] ( PerturbationWithGA ). The initial population
of the genetic algorithm comprises the current best (local) optima–we keep track of the five best
optima–and randomly generated placements based on a sampling probability of
p∆Tt
mrt=exp ∆ Tt
mrti,j/τP
i,jexp ∆ Tt
mrti,j/τ, (2)
where the temperature τgoverns the entropy of p∆Tt
mrt. Subsequently, we refine the perturbed tree
positions from the genetic algorithm with the hill climbing algorithm ( HillClimbing ), similar to
Wallenberg et al. [2022]. If the candidate s′
∗improves upon our current optima S∗, we accept and
add it to our history of local optima S∗. Throughout the search, we ensure that trees are not placed
on buildings nor water, and trees have no overlapping canopies. Algorithm 1 provides pseudocode.
Further, we proof in Appendix C that our optimization method finds the optimal tree placements
given an unbounded number of iterations and sufficiently good Tmrtmodeling.
Mapping of tree placements to the spatial inputs During our optimization procedure, we optimize
the placement of trees by directly modifying the digital surface model for vegetation that represents
the trees’ canopies. However, depending spatial inputs (i.e., sky view factor maps for vegetation)
cannot be directly modified and conventional procedures are computationally expensive. Hence, we
propose to estimate the sky view factor maps from the digital surface model for vegetation with a
U-Net model fsvf. To train this model fsvf, we repurposed the conventionally computed sky view
factor maps, that were already required for computing point-wise Tmrtwith SOLWEIG.
Aggregated, point-wise mean radiant temperature modeling Above optimization procedure is
zero-order and, thus, requires fast evaluations of Tmrtto be computationally feasible. In particular,
we are interested in reducing aggregated, point-wise TM,ϕ
mrt for an aggregation function ϕ, e.g., mean,
3and time period M, e.g., multiple days of a heatwave event, as a means to improve outdoor human
thermal comfort. However, computing the point-wise Tmrtfor all |M|meteorological inputs of the
time period M(similar to Briegel et al. [2023]), followed by the aggregation with function ϕbecomes
prohibitively computationally expensive for large time periods.3To mitigate this computational
bottleneck, we propose to learn a U-Net model
fTM,ϕ
mrt(·)≈ϕ({fTmrt(·, m)| ∀m∈M}) (3)
that directly approximates aggregated, point-wise TM,ϕ
mrt for a given aggregation function ϕand time
period M. For training data, we computed aggregated, point-wise TM,ϕ
mrt for a specified aggregation
function ϕand time period Mwith aforementioned (slow) procedure. However, note that this
computation has to be done only once for the generation of training data. During inference, the
computational complexity is effectively reduced by a factor of O(|M|).
3 Experimental evaluation
We assessed our optimization method by searching for the positions of knewly added trees (uniform
tree specimens with spherical crowns, tree height of 12 m , canopy diameter of 9 m, and trunk height
of25 % of the tree height) in the city of Freiburg im Breisgau (48 °00’ N, 07 °51’ E, southwest of
Germany (Baden-Württemberg)). We provide details about the spatial and meteorological data, and
experiments in Appendix B or E, respectively. We assessed the quality of our Tmrtmodeling in
Appendix H.1.
Table 1: Quantitative comparison to baselines.
Method day week year decade
random -0.12 -0.10 -0.01 -0.02
greedy Tmrt -0.18 -0.12 -0.02 -0.02
greedy ∆Tmrt -0.22 -0.18 -0.02 -0.02
genetic -0.26 -0.19 -0.02 -0.02
ILS†(ours) -0.30 -0.23 -0.03 -0.03
†:ILS= iterated local search.Figure 1 illustrates the efficacy of our approach
in reducing point-wise Tmrtacross diverse urban
landscapes for a heatwave event. For other time
periods refer to Appendix H.2. We observe that
trees predominantly assume positions on east-to-
west aligned streets and large, often sealed spaces.
Table 1 affirms that our optimization method con-
sistently finds better tree positions compared to var-
ious baselines. Interestingly, we found that trees
exhibit a dual influence–contributing to reductions
inTmrtin daytime and summer, and conversely causing increases in nighttime and winter (Ap-
pendix H.3). We also found that trees have diminishing returns as we increase the extent of canopy
cover, achieved either by adding more trees or by using larger trees (Appendix H.3). Lastly, we
investigated the counterfactual question whether alternative tree positions could have retrospectively
yielded reduced amounts of heat stress and can answer it in the affirmative in Appendix H.4.
4 Conclusion
We presented a simple and scalable method to optimize tree placements across large urban areas and
time scales to mitigate pedestrian-level heat stress by optimizing human thermal comfort expressed by
Tmrt. We proposed a novel approach to efficiently model aggregated, point-wise TM,ϕ
mrt for a specified
aggregation function and time period, and optimized tree placements through an instantiation of the
iterated local search framework with tailored adaptations. Our experimental results corroborate the
efficacy of our approach. We discuss limitations, broader impact, and provide a carbon footprint
estimate in Appendices I to K, respectively.
Acknowledgments and Disclosure of Funding
This research was funded by the Bundesministerium für Umwelt, Naturschutz, nukleare Sicherheit
und Verbraucherschutz (BMUV , German Federal Ministry for the Environment, Nature Conserva-
tion, Nuclear Safety and Consumer Protection) based on a resolution of the German Bundestag
(67KI2029A), and the Deutsche Forschungsgemeinschaft (DFG, German Research Foundation)
under grant number 417962828. Spatial data (digital elevation model & digital surface model) was
provided by the administration of the city of Freiburg.
3For sake of simplicity, we assumed that the spatial input is static over the entire time period.
4References
United Nations. Causes and Effects of Climate Change, 2023. URL https://www.un.org/en/
climatechange/science/causes-effects-climate-change . [Online; accessed 20-September-2023].
Katharina M.A. Gabriel and Wilfried R. Endlicher. Urban and rural mortality rates during heat waves in berlin
and brandenburg, germany. Environmental Pollution , 2011.
Jutta Holst and Helmut Mayer. Impacts of street design parameters on human-biometeorological variables.
Meteorologische Zeitschrift , 2011.
Noémi Kántor and János Unger. The most problematic variable in the course of human-biometeorological
comfort assessment—the mean radiant temperature. Central European Journal of Geosciences , 2011.
Pninit Cohen, Oded Potchter, and Andreas Matzarakis. Daily and seasonal climatic conditions of green urban
open spaces in the mediterranean climate and their impact on human comfort. Building and Environment ,
2012.
Helmut Mayer, Jutta Holst, Paul Dostal, Florian Imbery, and Dirk Schindler. Human thermal comfort in summer
within an urban street canyon in central europe. Meteorologische Zeitschrift , 2008.
Sofia Thorsson, Joacim Rocklöv, Janina Konarska, Fredrik Lindberg, Björn Holmer, Bénédicte Dousset, and
David Rayner. Mean radiant temperature–a predictor of heat related mortality. Urban Climate , 2014.
David J. Nowak, Daniel E. Crane, and Jack C. Stevens. Air pollution removal by urban trees and shrubs in the
united states. Urban Forestry & Urban Greening , 2006.
Petra Lindemann-Matthies and Hendrik Brieger. Does urban gardening increase aesthetic quality of urban areas?
a case study from germany. Urban Forestry & Urban Greening , 2016.
Qunshan Zhao, David J. Sailor, and Elizabeth A. Wentz. Impact of tree locations and arrangements on outdoor
microclimates and human thermal comfort in an urban residential environment. Urban Forestry & Urban
Greening , 2018.
Babak Abdi, Ahmad Hami, and Davoud Zarehaghi. Impact of small-scale tree planting patterns on outdoor
cooling and thermal comfort. Sustainable Cities and Society , 2020.
Hyunjung Lee, Helmut Mayer, and Wilhelm Kuttler. Impact of the spacing between tree crowns on the mitigation
of daytime heat stress for pedestrians inside ew urban street canyons under central european conditions.
Urban Forestry & Urban Greening , 2020.
Hong Chen, Ryozo Ooka, and Shinsuke Kato. Study on optimum design method for pleasant outdoor thermal
environment using genetic algorithms (GA) and coupled simulation of convection, radiation and conduction.
Building and Environment , 2008.
Ryozo Ooka, Hong Chen, and Shinsuke Kato. Study on optimum arrangement of trees for design of pleasant
outdoor environment using multi-objective genetic algorithm and coupled simulation of convection, radiation
and conduction. Journal of Wind Engineering and Industrial Aerodynamics , 2008.
Qunshan Zhao, Elizabeth A. Wentz, and Alan T. Murray. Tree shade coverage optimization in an urban residential
environment. Building and Environment , 2017.
Vesna Stojakovic, Ivana Bajsanski, Stevan Savic, Dragan Milosevic, and Bojan Tepavcevic. The influence of
changing location of trees in urban green spaces on insolation mitigation. Urban Forestry & Urban Greening ,
2020.
Nils Wallenberg, Fredrik Lindberg, and David Rayner. Locating trees to mitigate outdoor radiant load of humans
in urban areas using a metaheuristic hill-climbing algorithm–introducing treeplanter v1. 0. Geoscientific
Model Development , 2022.
David Rolnick, Priya L Donti, Lynn H Kaack, Kelly Kochanski, Alexandre Lacoste, Kris Sankaran, An-
drew Slavin Ross, Nikola Milojevic-Dupont, Natasha Jaques, Anna Waldman-Brown, et al. Tackling Climate
Change with Machine Learning. ACM Computing Surveys (CSUR) , 2022.
Ferdinand Briegel, Osama Makansi, Thomas Brox, Andreas Matzarakis, and Andreas Christen. Modelling
long-term thermal comfort conditions in urban environments using a deep convolutional encoder-decoder as a
computational shortcut. Urban Climate , 2023.
Langwen Huang and Torsten Hoefler. Compressing multidimensional weather and climate data into neural
networks. In International Conference on Learning Representations , 2023.
5Victor Schmidt, Alexandra Luccioni, Mélisande Teng, Tianyu Zhang, Alexia Reynaud, Sunand Raghupathi,
Gautier Cosne, Adrien Juraver, Vahe Vardanyan, Alex Hernández-García, and Yoshua Bengio. ClimateGAN:
Raising Climate Change Awareness by Generating Images of Floods. In International Conference on Learning
Representations , 2022.
Adrian Albert, Jasleen Kaur, and Marta C. Gonzalez. Using Convolutional Networks and Satellite Imagery to
Identify Patterns in Urban Environments at a Large Scale. In Proceedings of the ACM SIGKDD International
Conference on Knowledge Discovery and Data Mining , 2017.
Antoine Blanchard, Nishant Parashar, Boyko Dodov, Christian Lessig, and Themistoklis Sapsis. A Multi-Scale
Deep Learning Framework for Projecting Weather Extremes. Climate Change AI Workshop at Neural
Information Processing Systems , 2022.
Mélisande Teng, Amna Elmustafa, Benjamin Akera, Hugo Larochelle, and David Rolnick. Bird Distribution
Modelling using Remote Sensing and Citizen Science data. Climate Change AI Workshop at International
Conference on Learning Representations , 2023.
Karl Otness, Laure Zanna, and Joan Bruna. Data-driven multiscale modeling of subgrid parameterizations in
climate models. Climate Change AI Workshop at International Conference on Learning Representations ,
2023.
Jiaqi Shen, Chuan Liu, Yue Ren, and Hao Zheng. Machine learning assisted urban filling. In Proceedings of
the International Conference of the Association for Computer-Aided Architectural Design Research in Asia ,
2020.
Dongjie Wang, Yanjie Fu, Pengyang Wang, Bo Huang, and Chang-Tien Lu. Reimagining City Configuration:
Automated Urban Planning via Adversarial Learning. In Proceedings of the International Conference on
Advances in Geographic Information Systems , 2020.
Dongjie Wang, Kunpeng Liu, Pauline Johnson, Leilei Sun, Bowen Du, and Yanjie Fu. Deep Human-guided Con-
ditional Variational Generative Modeling for Automated Urban Planning. In IEEE International Conference
on Data Mining , 2021.
Dongjie Wang, Lingfei Wu, Denghui Zhang, Jingbo Zhou, Leilei Sun, and Yanjie Fu. Human-instructed Deep
Hierarchical Generative Learning for Automated Urban Planning. In Proceedings of the Conference on
Artificial Intelligence , 2023.
Yu Zheng, Yuming Lin, Liang Zhao, Tinghai Wu, Depeng Jin, and Yong Li. Spatial planning of urban
communities via deep reinforcement learning. Nature Computational Science , 2023.
Helena R. Lourenço, Olivier C. Martin, and Thomas Stützle. Iterated Local Search. In Handbook of Metaheuris-
tics. Springer, 2003.
Helena R. Lourenço, Olivier C. Martin, and Thomas Stützle. Iterated Local Search: Framework and Applications.
Handbook of Metaheuristics , 2019.
Fredrik Lindberg, Björn Holmer, and Sofia Thorsson. Solweig 1.0–modelling spatial variations of 3d radiant
fluxes and mean radiant temperature in complex urban settings. International Journal of Biometeorology ,
2008.
Mandavilli Srinivas and Lalit M Patnaik. Genetic algorithms: A survey. computer , 1994.
ASHRAE. Fundamentals handbook. American Society of Heating, Refrigerating, and Air- Conditioning
Engineers , 2001.
P. Höppe. A new procedure to determine the mean radiant temperature outdoors. Wetter und Leben , 44, 1992.
Vagn Korsgaard. Necessity of using a directional mean radiant temperature to describe the thermal condition in
rooms. Heating, Piping & Air Conditioning , 1949.
City of Freiburg. 3D-City-model Freiburg im Breisgau - LoD1, 2018.
City of Freiburg. LIDAR data, 2021. Vermessungsamt.
Hans Hersbach, Bill Bell, Paul Berrisford, Shoji Hirahara, András Horányi, Joaquín Muñoz-Sabater, Julien
Nicolas, Carole Peubey, Raluca Radu, Dinand Schepers, et al. The era5 global reanalysis. Quarterly Journal
of the Royal Meteorological Society , 2020.
Olaf Ronneberger, Philipp Fischer, and Thomas Brox. U-Net: Convolutional Networks for Biomedical Image
Segmentation. In Medical Image Computing and Computer-Assisted Intervention , 2015.
6Sergey Ioffe and Christian Szegedy. Batch Normalization: Accelerating Deep Network Training by Reducing
Internal Covariate Shift. In International Conference on Machine Learning , 2015.
Diederik P. Kingma and Jimmy Ba. Adam: A method for stochastic optimization. International Conference on
Learning Representations , 2015.
Tianqi Chen, Tong He, Michael Benesty, Vadim Khotilovich, Yuan Tang, Hyunsu Cho, Kailong Chen, Rory
Mitchell, Ignacio Cano, Tianyi Zhou, et al. Xgboost: eXtreme gradient boosting. R package version 0.4-2 ,
2015.
Lloyd S. Shapley. A value for n-person games. Contributions to the Theory of Games , 1953.
Scott M Lundberg and Su-In Lee. A Unified Approach to Interpreting Model Predictions. Neural Information
Processing Systems , 2017.
Judea Pearl. Causality . Cambridge university press, 2009.
Pierre J. Soille and Marc M. Ansoult. Automated basin delineation from digital elevation models using
mathematical morphology. Signal Processing , 1990.
Serge Beucher and Fernand Meyer. The Morphological Approach to Segmentation: The Watershed Transforma-
tion. In Mathematical Morphology in Image Processing , pages 433–481. CRC Press, 2018.
Hyunjung Lee, Jutta Holst, Helmut Mayer, et al. Modification of human-biometeorologically significant radiant
flux densities by shading as local method to mitigate heat stress in summer within urban street canyons.
Advances in Meteorology , 2013.
Sofia Thorsson, David Rayner, Fredrik Lindberg, Ana Monteiro, Lutz Katzschner, Kevin Ka-Lun Lau, Sabrina
Campe, Antje Katzschner, Janina Konarska, Shiho Onomura, et al. Present and projected future mean radiant
temperature for three european cities. International Journal of Biometeorology , 2017.
Jamie Tolan, Hung-I Yang, Ben Nosarzewski, Guillaume Couairon, Huy V o, John Brandt, Justine Spore,
Sayantan Majumdar, Daniel Haziza, Janaki Vamaraju, et al. Sub-meter resolution canopy height maps using
self-supervised learning and a vision transformer trained on Aerial and GEDI lidar. arXiv , 2023.
Alexandre Lacoste, Alexandra Luccioni, Victor Schmidt, and Thomas Dandres. Quantifying the Carbon
Emissions of Machine Learning. Climate Change AI Workshop at Neural Information Processing Systems ,
2019.
7A Mean radiant temperature
The mean radiant temperature Tmrt[°C] is a driving meteorological parameter for assessing the
radiation load on humans. During the day, it is of particular importance in determining human
outdoor thermal comfort. Tmrtvaries spatially, e.g., standing in direct sunlight on a hot day results in
a less favorable thermal experience for the human body than seeking shelter in shaded areas. Tmrtis
defined as the “uniform temperature of an imaginary enclosure in which radiant heat transfer from
the human body equals the radiant heat transfer in the actual non-uniform enclosure“ by ASHRAE
[2001]. That is, Tmrtcan be calculated by measured values of surrounding objects and their position
w.r.t. the person. Formally, Tmrtcan be computed by
T4
mrt=NX
i=1T4
iFp−i , (4)
where Tiis the surface temperature of the i-th surface and Fp−iis the angular factor between a person
and the i-th surface [ASHRAE, 2001]. Alternatively, we can use the six-directional approach of
Höppe [1992] through estimation of short- and longwave radiation fluxes of six directions (upward,
downward, and the four cardinal directions), as follows:
Tmrt=0.08(Tup
p+Tdown
p) + 0.23(Tleft
p+Tright
p) + 0.35(Tfront
p+Tback
p)
2(0.08 + 0 .23 + 0 .35), (5)
where Tpris the plane radiant temperature [Korsgaard, 1949].
B Data
Our study focuses on the city of Freiburg im Breisgau (48 °00’ N, 07 °51’ E, southwest of Germany
(Baden-Württemberg))4. Following Briegel et al. [2023], we used spatial (geometric) and temporal
(meteorological) inputs to model point-wise Tmrt. The spatial inputs include:
•Digital elevation model [m]: representation of elevation data of terrain excluding surface
objects.
•Digital surface model with heights of ground and buildings [m]: heights of ground and
buildings above sea level.
•Digital surface model with heights of vegetation [m]: heights of vegetation above ground
level.
• Land cover class map [ {paved, building, grass, bare soil, water }]: specifies the land-usage.
• Wall aspect [°]: aspect of walls where a north-facing wall has a value of zero.
• Wall height [m]: specifies the height of a wall of a building.
•Sky view factor maps [%]: cosine-corrected proportion of the visible sky hemisphere from a
specific location from earth’s surface by the total solid angle of the entire sky hemisphere.
Spatial inputs are of a size of 500 m x500 m with a resolution of 1 m. Raw LIDAR and building
outline (derived from CityGML with detail level of 1) data were provided by the City of Freiburg
[2018, 2021] and pre-processed spatial data were provided by Briegel et al. [2023]. We used
air temperature, wind speed, wind direction, incoming shortwave radiation, precipitation, relative
humidity, barometric pressure, solar elevation angle, and solar azimuth angle as temporally varying
meteorological inputs. We used past hourly measurements for training and hourly ERA5 reanalysis
data [Hersbach et al., 2020] for optimization. Table 2 provides exemplar temporal (meteorological)
inputs.
C Theoretical analysis of the optimization method
It is easy to show that our optimization method finds the optimal tree placements given an unbounded
number of iterations and sufficiently good Tmrtmodeling.
4The placeholder ensures double blindness and will be replaced upon acceptance.
8(a) Digital surface
model for vegeta-
tion [m].
(b) Sky view factor
map for vegetation
[%].
(c) Digital elevation
model [m].
(d) Digital surface
model for ground
and buildings [m].
(e) Sky view factor
map for ground and
buildings [%].
(f) Land cover class
map [ {paved, build-
ing, grass, bare soil,
water }].
(g) Wall aspect [°].
 (h) Wall height [m].
Figure 3: Exemplar spatial inputs. Note that we omit sky view factor maps for vegetation or
ground and building for the four cardinal directions (north, east, south, west) for visualization for
visualization.
Table 2: Exemplar meteorological inputs.
Date & timeAir temper-
ature [°C]Wind
speed [ms-1]Wind di-
rection [°]Incoming shortwave
radiation [Wm-2]Precipi-
tation [mm]Relative
humidity [%]Barometric
pressure [kPA]Elevation
angle [°]Azimuth
angle [°]
2020-01-01 00:00:00 -1.31 1.97 107.72 0.0 0.0 75.88 976.4 0.0 343.009
2020-03-20 06:00:00 9.07 0.64 114.71 0.0 0.0 83.46 964.7 0.0 83.264
2020-06-20 11:00:00 18.43 1.15 314.46 652.27 0.02 68.04 966.2 59.601 135.899
2020-09-22 16:00:00 22.35 1.43 245.3 310.98 0.04 56.1 955.1 22.754 242.247
2020-12-21 21:00:00 7.19 4.25 202.69 0.0 0.51 87.82 963.0 0.0 282.195
Lemma 1 (p∆Tt
mrti,j>0).The probability for all possible tree positions (i, j)isp∆Tt
mrti,j>0.
Proof. Since the exponential function expin Equation 2 is always positive, it follows that p∆Tt
mrti,j>
0and the denominator is always non-zero. Thus, the probabilities are well-defined.
Theorem 1 (Convergence to global optimum) .Our optimization method converges to the globally
optimal tree positions as (i) the number of iterations approaches infinity and (ii) the estimates of our
Tmrtmodeling are proportional to the true aggregated, point-wise TM,ϕ
mrt for an aggregation function
ϕand time period M.
Proof. We are guaranteed to sample the globally optimal tree positions with an infinite budget (as-
sumption (i)), as the perturbation step in our optimization method ( PerturbationWithGA ) randomly
interleaves tree positions with positive probability (Lemma 1). Since our optimization method directly
compares the effectiveness of tree positions using our TM,ϕ
mrt modeling pipeline–that yields estimates
that are proportional to true TM,ϕ
mrt values (assumption (ii))–we will accept them throughout all steps
of our optimization method and, consequently, find the global optimum.
D Mean radiant temperature modeling with SOLWEIG
SOLWEIG [Lindberg et al., 2008] uses spatial and temporal (meteorological) inputs to model Tmrtfor
a height of 1.1 mof a standing or walking rotationally symmetric person using the six-dimension
approach presented in Appendix A. We used the default model parameters:
• Emissivity ground: 0.95.
9• Emissivity walls: 0.9.
• Albedo ground: 0.15.
• Albedo walls: 0.2.
• Transmissivity: 3 %.
• Trunk height: 25 % of tree height.
E Experimental details
We evaluated our optimization approach for tree placements across diverse study areas and time
periods. We considered the following five study areas: city-center an old city-center, new r.a. a
recently developed residential area (r.a.) with age <5 years, medium-age r.a. a medium, primarily
residential district built 25-35 years ago, old r.a. an old building district where the majority of
buildings are older than 100 years, and industrial an industrial area. These areas vary considerably
in their characteristics, e.g., existing amount of vegetation or proportion of sealed surfaces. Further,
we considered the following time periods M: hottest day(and week ) in 2020 based on the (average
of) maximum daily air temperature, the entire year of 2020, and the decade from 2011 to 2020.
While the first two time periods focus on the most extreme heat stress events, the latter two provide
assessment over the course of longer time periods, including seasonal variations. We compared
our approach with random (positioning based on random chance), greedy Tmrt(maximal Tmrt),
greedy ∆Tmrt(maximal ∆Tmrt), and a genetic algorithm. We provide the hyperparameters of our
optimization method in Appendix F. Model and training details for TmrtandTM,ϕ
mrt estimation are
provided in Appendix G. Throughout our experiments, we used the mean as aggregation function
ϕ. While all optimization algorithms used the faster direct estimation of aggregated, point-wise
TM,ϕ
mrt with the model fTM,ϕ
mrt, we evaluated the final found tree placements by first predicting point-
wise Tmrtfor all|M|meteorological inputs across the specified time period Mwith the model fTmrt
and subsequently aggregated these estimations. To quantitatively assess the efficacy of tree placements,
we quantified the change in point-wise Tmrt(∆Tmrt[K]), averaged over the 500 m x500 m study area
(∆Tmrtarea-1[Km-2]), or averaged over the size of the canopy area ( ∆Tmrtcanopy area-1[Km-2]).
We excluded building footprints and open water areas from our evaluation criteria. Throughout our
experiments, we assumed that tree placements can be considered on both public and private property.
F Hyperparameter choices of optimzation
We implemented the genetic algorithm with PyGAD5. Throughout our experiments, we used a
population size of 20 with steady-state selection for parents, random mutation and single-point
crossover. We used the current best optima (up to five) and random samples for the initial population.
We set the temperature τof Equation 2 to 1. We kept the best solution throughout the evolution. We
used 1000 iterations within our optimization method. For the baseline genetic algorithm, we used
5000 iterations to account for larger compute due to the iterative design of our optimization approach.
For the HillClimbing algorithm, we adopted the design by Wallenberg et al. [2022]. That is, we
repeatedly cycle over all trees and try to move them within the adjacent eight neighbors. We accept
the move if it improves upon the current aggregated, point-wise TM,ϕ
mrt. We repeat this process until
no further improvement can be found.
Lastly, we used five iterations within our iterated local search. We found this resulted in a good
trade-off between the efficacy of the final tree placements and total runtime.
G Model and training details
Model details We adopted the U-Net architecture from Briegel et al. [2023]. Specifically, the
models fTmrtandfTM,ϕ
mrtreceive inputs of size 16×h×wand predict TmrtorTM,ϕ
mrt, respectively, of
size of h×w, where handware the height and width of the spatial input, respectively. The model
fsvfreceives an input of size h×w(digital surface model for vegetation) and outputs the sky view
5https://github.com/ahmedfgad/GeneticAlgorithmPython
10factor maps for vegetation of size of 5×h×w. All models use the U-Net architecture [Ronneberger
et al., 2015] with a depth of 3 and base dimensionality of 64. Each stage of the encoder and decoder
consist of a convolution or transposed convolution, respectively, followed by batch normalization
[Ioffe and Szegedy, 2015] and ReLU non-linearity.
Training details In the following, we provide the specific training details of all models.
•fTmrt: We trained the model with L1 loss function for ten epochs using the Adam optimizer
[Kingma and Ba, 2015] with learning rate of 0.001 and exponential learning rate decay
schedule. We randomly cropped (256x256) the inputs during training.
•fTM,ϕ
mrt: We trained the model with L1 loss function for 5000 epochs and batch size of 32
with Adam optimizer [Kingma and Ba, 2015] with learning rate of 0.001 and exponential
decay learning rate schedule. We randomly cropped (256x256) the inputs during training.
•fsvf: We trained the model with L1 loss function for 20 epochs with Adam optimizer
[Kingma and Ba, 2015] with learning rate of 0.001 and exponential decay learning rate
schedule. We randomly cropped (256x256) the inputs during training.
H Additional experimental results
H.1 Evaluation of mean radiant temperature modeling
We assessed the quality of our TmrtandTM,ϕ
mrt modeling. Our model for estimating point-wise
Tmrt(fTmrt) achieved a L1 error of 1.93 K compared to the point-wise Tmrtcalculated by the physical
model SOLWEIG [Lindberg et al., 2008]. This regression performance is in line with Briegel
et al. [2023] who reported a L1 error of 2.4 K. Next, we assessed our proposed model fTM,ϕ
mrtthat
estimates aggregated, point-wise TM,ϕ
mrt for aggregation function ϕ(i.e., mean) over a specified
time period M. We found only a modest increase in L1 error by 0.46 K (for time period M=day),
0.42 K (week ),0.35 K (year ), and 0.18 K (decade ) compared to first predicting point-wise Tmrtfor
allMmeteorological inputs with model fTmrtand then aggregating them. While model fTM,ϕ
mrtis
slightly worse in regression performance, we want to emphasize its substantial computational speed-
ups. To evaluate the computational speed-up, we used a single NVIDIA RTX 3090 GPU and
averaged estimation times for TM,ϕ
mrt over five runs. We found computational speed-ups by up to
400,000x (for the time period decade with|M|= 87 ,672meteorological inputs). Lastly, our
estimation of sky view factors from the digital surface model for vegetation with model fsvfachieved
a mere L1 error of 0.047 % when compared to conventionally computed sky view factor maps.
Substituting the conventionally computed sky view factor maps with our estimates resulted in only a
negligible regression performance decrease of ca. 0.2 Kcompared to SOLWEIG’s estimates using
the conventionally computed sky view factor maps.
H.2 Optimization results on other time periods
Figure 4 provides qualitative results for the hottest dayin 2020, the entire year of 2020, and the
decade from 2011 till 2020. We optimized the positions of 50 trees, each with a height of 12 m and
crown diameter of 9 m.
H.3 Analyses
Given the found tree placements from our experiments in Section 3 and Appendix H.2, we conducted
analyses on various aspects (daily variation, seasonal variation, number of trees, tree geometry
variation). Figure 5 shows a noteworthy duality caused by daily and seasonal variations. Specifically,
trees exert a dual influence, reducing Tmrtduring daytime and summer season, while conversely
increasing it during nighttime and winter season. To understand the impact of meteorological
parameters on this, we trained an XGBoost classifier [Chen et al., 2015] on each study area and all
meteorological inputs from 2020 ( year ) to predict whether the additional trees reduce or increase
Tmrt. We assessed feature importance using SHAP [Shapley, 1953, Lundberg and Lee, 2017] and
found that incoming shortwave radiation Igemerges as the most influential meteorological parameter.
110 200 4000
200
400city-center
0 200 400new r.a.
0 200 400medium-age r.a.
0 200 400old r.a.
0 200 400industrial
−909∆Tmrt[K]
(a) Hottest dayin 2020.
0 200 4000
200
400city-center
0 200 400new r.a.
0 200 400medium-age r.a.
0 200 400old r.a.
0 200 400industrial
−404∆Tmrt[K]
(b)year 2020.
0 200 4000
200
400city-center
0 200 400new r.a.
0 200 400medium-age r.a.
0 200 400old r.a.
0 200 400industrial
−303∆Tmrt[K]
(c)decade from 2011 to 2020.
Figure 4: Optimizing tree placements can substantially reduce point-wise Tmrt, e.g., during heatwaves,
leading to improved outdoor human thermal comfort. Optimized placements of 50 added trees, each
with a height of 12 m and crown diameter of 9 m, for the hottest day(4(a)) in 2020, the entire year
2020 (4(b)), and the entire decade from 2011 to 2020 (4(c)) across diverse urban neighborhoods
(from left to right: city-center , recently developed new r.a. (residential area), medium-age
r.a. ,old r.a. ,industrial area).
03:00 09:00 15:00 21:00
time−4−202∆Tmrtcanopy
area−1[Km−2]
01.01. 20.03 20.06. 22.09. 21.12.
day of year−10−50510city-center
new r.a.
medium-age r.a.
old r.a.
industrial
Figure 5: Daily (left) and seasonal variation (right) reduce Tmrtduring daytime and summer season,
while conversely increase it during nighttime and winter season. Results based on experiments adding
50 trees, each with a height of 12 m and a crown diameter of 9 m, for the time period year .
Remarkably, a simple classifier of the form
y=
Tmrtdecreases , Ig>96 Wm-2
Tmrtincreases ,otherwise, (6)
achieves an average accuracy of 97.9 %±0.005 % , highlighting its predictive prowess.
Besides the above, Figure 6 reveals a pattern of diminishing returns as we increase the extent of
canopy cover, achieved either by adding more trees or by using larger trees. This trend suggests
that there may be a point of saturation beyond which achieving further reductions in Tmrtbecomes
progressively more challenging. To corroborate this trend quantitatively, we computed Spearman rank
correlations between ∆Tmrtcanopy area-1and the size of the canopy area; also including pre-existing
trees with a minimum height of 3 m. We found high Spearman rank correlations of 0.72 or 0.73 for
varying number of trees or tree heights, respectively. Notwithstanding the presence of diminishing
120 50 100 150 200
number of trees−12−10−8∆Tmrtcanopy
area−1[Km−2]
4 6 8 10 12 14 16 18
tree height [m]−15−10city-center
new r.a.
medium-age r.a.
old r.a.
industrialFigure 6: Increasing the number of trees (left) and tree height (right) has diminishing returns for the
reduction of Tmrt. Results are based on the experiment adding trees for the time period week .
2020-08-07
00:00:002020-08-08
00:00:002020-08-09
00:00:002020-08-10
00:00:002020-08-11
00:00:002020-08-12
00:00:002020-08-13
00:00:002020-08-14
00:00:00
date & time−4−20∆Tmrtarea−1
[Km−2]city-center
new r.a.
medium-age r.a.
old r.a.
industrial
Figure 7: Alternative placements of existing trees substantially reduces Tmrtduring daytime. Opti-
mization ran for the hottest week in 2020 (heatwave condition).
returns, we still emphasize that each tree leads to a palpable decrease in Tmrt, thereby enhancing
outdoor human thermal comfort–an observation that remains steadfast despite these trends.
H.4 Counterfactual placement of trees
In our other experiments, we always added trees to the existing urban vegetation. However, it remains
uncertain whether the placement of existing trees, determined by natural evolution or human-made
planning, represents an optimal spatial arrangement of trees. Thus, we pose the counterfactual
question [Pearl, 2009]: could alternative tree positions have retrospectively yielded a reduced amount
of heat stress ? To answer this counterfactual question, we identified all existing trees from the digital
surface model for vegetation with a simple procedure based on the watershed algorithm [Soille and
Ansoult, 1990, Beucher and Meyer, 2018]–which is optimal in identifying non-overlapping trees,
i.e., the maximum point of the tree does not overlap with any other tree, with strictly increasing
canopies towards each maximum point–and optimized their placements for the hottest week in 2020
(heatwave condition). We only considered vegetation of a minimum height of 3 mand ensured that
the post-extraction size of the canopy area does not exceed the size of the (f)actual canopy area.
Results We found alternative tree placements that would have led to a substantial reduction of
Tmrtby an average of 0.83 K . Furthermore, it would have resulted in a substantial reduction of
Tmrtexceeding 60◦C–a recognized threshold for heat stress [Lee et al., 2013, Thorsson et al., 2017]–
by on average 19.7 %throughout the duration of the heatwave event ( week ). This strongly suggests
that the existing placements of trees may not be fully harnessed to their optimal capacity. Notably,
the improvement by relocation of existing trees is significantly larger than the effect of 50 added
trees ( 0.23 K ; see Table 1). Figure 7 visualizes the change in Tmrtacross each hour of the hottest
week in 2020. Intriguingly, they reveal peaks during morning and afternoon hours. By inspecting the
relocations of trees (see Figure 8), we found that trees tend to be relocated from spaces with already
ample shading from tree canopies and buildings to large, open, typically sealed spaces without trees,
such as parking lots or sealed plazas.
H.5 Ablation study
We conducted an ablation study by selectively ablating components of our optimization method.
Specifically, we studied the contributions of the greedy initialization strategy ( TopK ) by substituting
it with random initialization, as well as (de)activating perturbation ( PerturbationWithGA ), local
search ( HillClimbing ), or the iterative design ( Iterations ). Table 3 shows the positive effect of
each component. It is noteworthy that the iterated design may exhibit a relatively diminished impact
in scenarios where the greedy initialization or first iteration already yield good or even the (globally)
optimal tree positions.
130 200 4000
200
400city-center
0 200 400new r.a.
0 200 400medium-age r.a.
0 200 400old r.a.
0 200 400industrial
−39039∆height [m]
Figure 8: The alternative tree placements (Appendix H.4) often move from north-to-south streets to
west-to-east streets as well as open, typically paved spaces. Red indicates that vegetation (i.e., tree)
was added, whereas blue indicates that vegetation was removed.
Table 3: Ablation study over different choices of our optimization method for the time period week
averaged across the five study areas for 50 added trees of height of 12 m and crown diameter of 9 m.
TopK PerturbationWithGA HillClimbing Iterations ∆Tmrtarea-1[Km-2]
✓ - - - -0.1793
- ✓ ✓ ✓ -0.1955
✓ - ✓ ✓ -0.2094
✓ ✓ - ✓ -0.2337
✓ ✓ ✓ - -0.2302
✓ ✓ ✓ ✓ -0.2345
I Limitations
The main limitation, or strength, of our approach is assumption (ii) from Theorem 1 that the model
fTM,ϕ
mrtyields estimates for that are (at least) proportional to the true aggretated, point-wise TM,ϕ
mrt for
aggregation function ϕand time period M. Our experimental evaluation affirms the viability of
this approximation, but it remains an assumption. Another limitation is that we assumed a static
urban environment, contrasting the dynamic real world. Further, we acknowledge the uniform tree
parameterization, i.e., same tree geometry, species, or transmissivity. While varying tree geometry
could be explored further in future works, both latter are limitations of SOLWEIG, which we rely
on to train our models. In a similar vein, our experiments focused on a single city, which may not
fully encompass the diversity of cities worldwide. We believe that easier data acquisition of spatial
input data, e.g., through advances in canopy and building height estimation [Lindemann-Matthies and
Brieger, 2016, Tolan et al., 2023], could facilitate the adoption of our approach to other cities. Our
experiments lack a distinction between public and private property, as well as does not incorporate
considerations regarding the actual ecological and regulatory feasibility of tree positions, e.g., trees
may be placed in the middle of streets. Lastly, our approach does not consider the actual zones of
activity and pathways of pedestrians. Future work could address these limitations by incorporating
comprehensive data regarding the feasibility, cost of tree placements and pedestrian pathways, with
insights from, e.g., urban forestry or legal experts, as well as considering the point-wise likelihood of
humans sojourning at a certain location. Finally, other factors, such as wind, air temperature, and
humidity, also influence human thermal comfort, however vary less distinctly spatially but keep the
integration of such for future work.
J Broader impact
We believe that our approach can empower urban decision-makers selecting effective measures for
climate-sensitive urban planning and climate adapation, reduces power consumption, and democ-
ratizes access to planning tools to smaller communities as well as citizens. However, our approach
could also be used improperly for urban planning by ignoring other important factors, such as the
influence of trees on wind patterns, heave rain events, or legal requirements. Moreover, adverse
14individuals may manipulate results to further their personal goals, e.g., they do not want trees in front
of their homes, which may not necessarily align with societal goals.
K Carbon footprint estimate
All components of our optimization approach cause carbon dioxide emissions. We estimated the
emissions for our final experiments (including training of models, optimization, ablations etc.) using
the calculator by Lacoste et al. [2019].6Experiments were conducted using an internal infrastructure,
which has a carbon efficiency of 0.385 kgCO2eq/kWh7. A cumulative of ca. 380 h of computation
was performed on various GPU hardware. Emissions are estimated to be ca. 39 kgCO2eq. Note that
the actual carbon emissions over the course of this project is multiple times larger.
6https://mlco2.github.io/impact/
7Note that carbon efficiency figures for 2023 were not released at time of writing.
15